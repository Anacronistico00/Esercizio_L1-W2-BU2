@{
    ViewData["Title"] = "Lista Studenti";
}

<h1>Lista degli Studenti</h1>

<div id="ListContainer" class="container"></div>

@section Scripts {
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            let container = document.getElementById("ListContainer");

            if(container) {
                const response = fetch("students/GetAllStudents", {
                    method: "GET",
                    headers: {
                        "Content-Type": "application/json"
                    }
                })
                .then(response => {
                    if(!response.ok) {
                        throw new Error("Errore nella richiesta");
                    }
                    return response.text();
                })
                .then(data => {
                    container.innerHTML = data;

                    new DataTable('#StudentsTable')
                });

            }
        })
    </script>
}